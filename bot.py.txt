from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Updater, CommandHandler, MessageHandler, Filters

# FunÃ§Ã£o para enviar a mensagem de boas-vindas
def welcome_message(update: Update, context):
    """Envia uma mensagem de boas-vindas com botÃ£o de pagamento"""
    # O botÃ£o com o link de compra
    keyboard = [[InlineKeyboardButton("Comprar ConteÃºdo ğŸ”¥", url="https://sualoja.com/compra")]]
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    # Envia a mensagem
    update.message.reply_text(
        "ğŸ‰ Bem-vindo ao grupo! Para acessar nosso conteÃºdo exclusivo, clique no botÃ£o abaixo e faÃ§a o pagamento.", 
        reply_markup=reply_markup
    )

# FunÃ§Ã£o principal do bot
def main():
    # Coloque seu token aqui (pegue do BotFather)
    updater = Updater("SEU_TOKEN_AQUI", use_context=True)
    dispatcher = updater.dispatcher

    # Detectar quando alguÃ©m entra no grupo
    dispatcher.add_handler(MessageHandler(Filters.status_update.new_chat_members, welcome_message))
    
    # Inicia o bot
    updater.start_polling()
    updater.idle()

if __name__ == '__main__':
    main()
